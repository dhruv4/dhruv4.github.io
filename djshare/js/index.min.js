function addToList(a){SC.get("/tracks/"+a,function(b){document.getElementById("upnext").innerHTML+="<li class='play-li collection-item' value="+a+" oncreate='changeList()'>"+b.title+"<button onclick='removeSong(this)' class='remove btn-floating btn right waves-effect waves-light red mdi-content-remove-circle'></button></li>",changeList()})}function removeSong(a){a.parentNode.parentNode.removeChild(a.parentNode),changeList()}function playPlaylist(){var a=parseInt($("#upnext li").val());a!=-1&&null!=a&&NaN!=a&&($("#stop-playlist").removeClass("disabled"),$("#pause-playlist").removeClass("disabled"),$("#next-playlist").removeClass("disabled"),$("#stop-playlist").prop("disabled",!1),$("#pause-playlist").prop("disabled",!1),$("#pause-playlist").html("<i class='mdi-av-pause-circle-fill'></i>"),$("#next-playlist").prop("disabled",!1),console.log(document.getElementById("upnext").firstChild),document.getElementById("upnext").removeChild(document.getElementById("upnext").firstChild),$("#play-playlist").addClass("disabled"),$("#play-playlist").prop("disabled",!0),console.log(document.getElementById("upnext").firstChild),console.log("Now Set ID: ",a),changeList(),setFBNowPlaying(a),null!=SC.sound&&SC.sound.stop(),console.log("Now Play ID",a),SC.stream("/tracks/"+a,{onfinish:function(){playPlaylist()}},function(a){SC.sound=a,a.play()}))}function pauseSong(){$("#pause-playlist i").hasClass("mdi-av-pause-circle-fill")?$("#pause-playlist").html("<i class='mdi-av-play-circle-fill'></i>"):$("#pause-playlist").html("<i class='mdi-av-pause-circle-fill'></i>"),null!=SC.sound&&SC.sound.togglePause()}function stopSong(){setFBNowPlaying(-1),$("#play-playlist").removeClass("disabled"),$("#play-playlist").prop("disabled",!1),$("#stop-playlist").addClass("disabled"),$("#pause-playlist").addClass("disabled"),$("#next-playlist").addClass("disabled"),$("#stop-playlist").prop("disabled",!0),$("#pause-playlist").prop("disabled",!0),$("#next-playlist").prop("disabled",!0),null!=SC.sound&&SC.sound.stop()}function nextSong(){playPlaylist()}function prevSong(a,b){null!=SC.sound?(SC.sound.stop(),$(a).hasClass("mdi-av-pause-circle-outline")?($(a).removeClass("mdi-av-pause-circle-outline"),$(a).addClass("mdi-av-play-circle-outline")):($(".prevsong").each(function(){$(this).removeClass("mdi-av-pause-circle-outline"),$(this).addClass("mdi-av-play-circle-outline")}),$(a).removeClass("mdi-av-play-circle-outline"),$(a).addClass("mdi-av-pause-circle-outline"),SC.stream("/tracks/"+b,function(a){SC.sound=a,a.play()}))):SC.stream("/tracks/"+b,function(b){SC.sound=b,b.play(),$(a).removeClass("mdi-av-play-circle-outline"),$(a).addClass("mdi-av-pause-circle-outline")})}function search(){$("#search-results").show();var a=document.getElementById("search-inp").value;SC.get("/tracks",{q:a},function(a){document.getElementById("search-results").innerHTML="";for(var b=0;b<a.length;b++)isDJ?document.getElementById("search-results").innerHTML+="<li class='collection-item search-li'>"+a[b].title+"<div class='search-buttons'><button class='btn-floating right red mdi-content-add-circle-outline waves-effect waves-light' onclick='addToList("+a[b].id+")'></button></div></li>":document.getElementById("search-results").innerHTML+="<li class='collection-item search-li'>"+a[b].title+"<div class='search-buttons'><button class='btn-floating right red mdi-content-add-circle-outline waves-effect waves-light' onclick='addToList("+a[b].id+")'></button><button class='btn-floating right blue waves-effect waves-light mdi-av-play-circle-outline prevsong' onclick=prevSong(this,"+a[b].id+")></button></div></li>"})}function setFBNowPlaying(a){console.log("Now ID: ",a),myDataRef.child("nowplaying").set(a),setNowPlaying(a)}function setNowPlaying(a){return console.log("Now ID: ",a),a==-1?($("#now-img").attr("src","media/blank-album.png"),$("#now-title").text(""),void $("#now-artist").text("")):void SC.get("/tracks/"+a,function(a){$("#now-title").text(a.title),$("#now-artist").text(a.user.username),null!=a.artwork_url?$("#now-img").attr("src",a.artwork_url):$("#now-img").attr("src","media/blank-album.png")})}function createList(){hasID=!0;var a=myDataRef.push({list:[["No songs in up next!",-1]],nowplaying:-1});document.getElementById("ID-disp").innerHTML=a.key().substr(1),$("#twitter-share").attr("href","https://twitter.com/intent/tweet?via=djsharetweets&text=Join my group playlist at dj-share.com/%23"+a.key().substr(1)+"!"),isDJ=!0,window.location.hash=a.key().substr(1),$("music-control").show(),$("#playlist-name").show(),$("#search-div").show(),$("#code-card").show(),$("#isDJ").show(),$("#join-container").remove(),$("#playlist-name-head").remove(),$("#qrcode").qrcode({width:100,height:100,text:"https://www.dj-share.com/#"+a.key().substr(1)}),$("#dj-modal").openModal(),myDataRef=new Firebase("https://dj-share.firebaseIO.com/"+a.key()),myDataRef.onDisconnect().remove()}function setList(a){if(null!=a.val()&&(a.val().nowplaying!=-1&&setNowPlaying(a.val().nowplaying),null!=a.val().title&&$("#playlist-name-head").html(a.val().title),document.getElementById("upnext").innerHTML="",null!=a.val().list))for(var b=0;b<a.val().list.length;b++)a.val().list[b][1]!=-1?document.getElementById("upnext").innerHTML+="<li value='"+a.val().list[b][1]+"' class='play-li collection-item' oncreate='changeList()'>"+a.val().list[b][0]+"<button onclick='removeSong(this)' class='remove btn-floating btn waves-effect waves-light right red mdi-content-remove-circle'></button></li>":document.getElementById("upnext").innerHTML+="<li value='"+a.val().list[b][1]+"' class='play-li collection-item' oncreate='changeList()'>"+a.val().list[b][0]+"</li>"}function addslashes(a){return(a+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")}function joinList(){if(window.location.hash.length<1){if(document.getElementById("id-inp").value.length>19)return void $("#code-error").text("Inputted Code Too Long");if(document.getElementById("id-inp").value.length<19)return void $("#code-error").text("Inputted Code Too Short");window.location.hash=document.getElementById("id-inp").value}var a=window.location.hash.substr(1,19);myDataRef=new Firebase("https://dj-share.firebaseIO.com/-"+a);var b=!1;myDataRef.once("value",function(a){return null==a.val()?($("main").html("<h4 class='blue-grey-text center'>Playlist Not Found</h4>"),b=!0,void $("#attendee-modal").closeModal()):void setList(a)}),b||(hasID=!0,isDJ=!1,$("#code-card").show(),$("#playlist-name").show(),$("#ID-disp").text(a),$("#twitter-share").attr("href","https://twitter.com/intent/tweet?via=djsharetweets&text=Join my group playlist at dj-share.com/%23"+a+"!"),$("#qrcode").qrcode({width:100,height:100,text:"https://www.dj-share.com/%23"+a}),$("#search-div").show(),$("#join-container").remove(),$("#playlist-name-input").remove(),$("#music-control").remove(),$("#isDJ").remove(),$("#attendee-modal").openModal())}function changeList(){if(console.log("change list"),hasID){var a=[];$("#upnext li").each(function(){$(this).val()!=-1&&a.push([$(this).text(),$(this).val()])}),0==a.length&&a.push(["No songs in up next!",-1]),myDataRef.child("list").set(a)}}function nameChange(a){myDataRef.child("title").set(a.value)}var myDataRef=new Firebase("https://dj-share.firebaseIO.com/"),hasID=!1,isDJ;SC.initialize({client_id:"99e7642d52b561e876783bf9125a0c7e"}),$(document).ready(function(){window.location.hash.length>1&&joinList(),$(".slider").slider({full_width:!0,height:270,interval:6e3,transition:500}),$("#visas_style_div").remove()}),$(function(){$("#upnext").sortable({placeholder:"ui-state-highlight",update:function(a,b){changeList()}}),$("#upnext").disableSelection(),$("#search-div").keypress(function(a){13==a.which&&search()})}),myDataRef.on("child_changed",function(a){hasID&&a.V.path.n[0]==myDataRef.path.n[0]&&setList(a)});